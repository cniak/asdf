CREATE TABLE IF NOT EXISTS nauczyciel (
nauczycielID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
login VARCHAR(20) NOT NULL UNIQUE,
haslo VARCHAR(20) NOT NULL,
imie VARCHAR(20),
nazwisko VARCHAR(20),
pesel VARCHAR(20),
email VARCHAR(20),
email_haslo VARCHAR(20)
);

CREATE TABLE IF NOT EXISTS klasa (
klasaID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
nazwa VARCHAR(20) NOT NULL,
haslo VARCHAR(20) NOT NULL,
rocznik VARCHAR(20),
nauczycielNR INTEGER NOT NULL,
FOREIGN KEY (nauczycielNR) REFERENCES nauczyciel(nauczycielID)
);

CREATE TABLE IF NOT EXISTS przedmiot (
przedmiotID INTEGER PRIMARY KEY NOT NULL,
nauczycielNR INTEGER,
nazwa VARCHAR(30),
FOREIGN KEY (nauczycielNR) references nauczyciel
);


CREATE TABLE IF NOT EXISTS uczen (
uczenID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
klasaNR INTEGER NOT NULL,
imie VARCHAR(20) NOT NULL,
nazwisko VARCHAR(20) NOT NULL,
pesel CHAR(9) NOT NULL
);

CREATE TABLE IF NOT EXISTS data(
dataID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
data VARCHAR(20) NOT NULL UNIQUE
);


CREATE TABLE IF NOT EXISTS lekcja (
lekcjaID INTEGER,
klasaID INTEGER,
uczenID INTEGER,
przedmiotID INTEGER,
dataID INTEGER,
obecnosc INT CHECK(obecnosc >=0 AND obecnosc <=1),
FOREIGN KEY (dataID) REFERENCES data(dataID),
FOREIGN KEY (klasaID) REFERENCES klasa(klasaID),
FOREIGN KEY (uczenID) REFERENCES uczen(uczenID),
FOREIGN KEY (przedmiotID) REFERENCES przedmiot(przedmiotID),
PRIMARY KEY (lekcjaID, klasaID, uczenID, przedmiotID, dataID)
);

CREATE TABLE IF NOT EXISTS ocena (
klasaID INTEGER,
uczenID INTEGER,
przedmiotID INTEGER,
dataID INTEGER,
wartosc INT check (wartosc >=1 AND wartosc <= 6),

FOREIGN KEY (klasaID) REFERENCES klasa(klasaID),
FOREIGN KEY (uczenID) REFERENCES uczen(uczenID),
FOREIGN KEY (przedmiotID) REFERENCES przedmiot(przedmiotID),
FOREIGN KEY (dataID) REFERENCES data(dataID),
PRIMARY KEY (klasaID,uczenID, przedmiotID, dataID)
);


CREATE TABLE IF NOT EXISTS telefon (
telefonID INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL,
uczenNR INT,
numer INT UNIQUE NOT NULL,
FOREIGN KEY(uczenNR) REFERENCES uczen(uczenID)
);